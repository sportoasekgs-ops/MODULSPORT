{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class ApiService {\n  constructor(http) {\n    this.http = http;\n    this.apiUrl = '/api/sportoase';\n    this.csrfToken = '';\n    this.initCsrfToken();\n  }\n  initCsrfToken() {\n    this.http.get(`${this.apiUrl}/csrf`, {\n      withCredentials: true\n    }).subscribe(response => {\n      this.csrfToken = response.csrfToken;\n    }, error => console.error('Failed to get CSRF token:', error));\n  }\n  getHeaders() {\n    let headers = new HttpHeaders({\n      'Content-Type': 'application/json'\n    });\n    if (this.csrfToken) {\n      headers = headers.set('X-CSRFToken', this.csrfToken);\n    }\n    return headers;\n  }\n  getSlots(date) {\n    return this.http.get(`${this.apiUrl}/slots?date=${date}`, {\n      withCredentials: true\n    });\n  }\n  getWeekOverview(startDate) {\n    let url = `${this.apiUrl}/slots/week`;\n    if (startDate) {\n      url += `?start_date=${startDate}`;\n    }\n    return this.http.get(url, {\n      withCredentials: true\n    });\n  }\n  getTimeslots() {\n    return this.http.get(`${this.apiUrl}/timeslots`, {\n      withCredentials: true\n    });\n  }\n  createBooking(bookingData) {\n    return this.http.post(`${this.apiUrl}/book`, bookingData, {\n      headers: this.getHeaders(),\n      withCredentials: true\n    });\n  }\n  getMyBookings(startDate, endDate) {\n    let url = `${this.apiUrl}/my-bookings`;\n    const params = [];\n    if (startDate) params.push(`start_date=${startDate}`);\n    if (endDate) params.push(`end_date=${endDate}`);\n    if (params.length > 0) {\n      url += '?' + params.join('&');\n    }\n    return this.http.get(url, {\n      withCredentials: true\n    });\n  }\n  deleteBooking(bookingId) {\n    return this.http.delete(`${this.apiUrl}/bookings/${bookingId}`, {\n      headers: this.getHeaders(),\n      withCredentials: true\n    });\n  }\n  blockSlot(slotData) {\n    return this.http.post(`${this.apiUrl}/block-slot`, slotData, {\n      headers: this.getHeaders(),\n      withCredentials: true\n    });\n  }\n  unblockSlot(slotData) {\n    return this.http.post(`${this.apiUrl}/unblock-slot`, slotData, {\n      headers: this.getHeaders(),\n      withCredentials: true\n    });\n  }\n  getBlockedSlots() {\n    return this.http.get(`${this.apiUrl}/blocked-slots`, {\n      withCredentials: true\n    });\n  }\n  getAllBookings(date) {\n    let url = `${this.apiUrl}/bookings`;\n    if (date) {\n      url += `?date=${date}`;\n    }\n    return this.http.get(url, {\n      withCredentials: true\n    });\n  }\n  getNotifications(unreadOnly = false) {\n    let url = `${this.apiUrl}/notifications`;\n    if (unreadOnly) {\n      url += '?unread_only=true';\n    }\n    return this.http.get(url, {\n      withCredentials: true\n    });\n  }\n  markNotificationRead(notificationId) {\n    return this.http.post(`${this.apiUrl}/notifications/${notificationId}/mark-read`, {}, {\n      headers: this.getHeaders(),\n      withCredentials: true\n    });\n  }\n  static {\n    this.ɵfac = function ApiService_Factory(t) {\n      return new (t || ApiService)(i0.ɵɵinject(i1.HttpClient));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: ApiService,\n      factory: ApiService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["HttpHeaders","ApiService","constructor","http","initCsrfToken","get","apiUrl","withCredentials","subscribe","response","csrfToken","error","console","getHeaders","headers","set","getSlots","date","getWeekOverview","startDate","url","getTimeslots","createBooking","bookingData","post","getMyBookings","endDate","params","push","length","join","deleteBooking","bookingId","delete","blockSlot","slotData","unblockSlot","getBlockedSlots","getAllBookings","getNotifications","unreadOnly","markNotificationRead","notificationId","factory","providedIn"],"sourceRoot":"","sources":["/home/runner/workspace/frontend/src/app/services/api.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ApiService {\n  private apiUrl = '/api/sportoase';\n  private csrfToken: string = '';\n\n  constructor(private http: HttpClient) {\n    this.initCsrfToken();\n  }\n\n  private initCsrfToken(): void {\n    this.http.get<any>(`${this.apiUrl}/csrf`, { withCredentials: true }).subscribe(\n      response => {\n        this.csrfToken = response.csrfToken;\n      },\n      error => console.error('Failed to get CSRF token:', error)\n    );\n  }\n\n  private getHeaders(): HttpHeaders {\n    let headers = new HttpHeaders({\n      'Content-Type': 'application/json'\n    });\n    \n    if (this.csrfToken) {\n      headers = headers.set('X-CSRFToken', this.csrfToken);\n    }\n    \n    return headers;\n  }\n\n  getSlots(date: string): Observable<any> {\n    return this.http.get(`${this.apiUrl}/slots?date=${date}`, { withCredentials: true });\n  }\n\n  getWeekOverview(startDate?: string): Observable<any> {\n    let url = `${this.apiUrl}/slots/week`;\n    if (startDate) {\n      url += `?start_date=${startDate}`;\n    }\n    return this.http.get(url, { withCredentials: true });\n  }\n\n  getTimeslots(): Observable<any> {\n    return this.http.get(`${this.apiUrl}/timeslots`, { withCredentials: true });\n  }\n\n  createBooking(bookingData: any): Observable<any> {\n    return this.http.post(`${this.apiUrl}/book`, bookingData, { \n      headers: this.getHeaders(),\n      withCredentials: true\n    });\n  }\n\n  getMyBookings(startDate?: string, endDate?: string): Observable<any> {\n    let url = `${this.apiUrl}/my-bookings`;\n    const params: string[] = [];\n    \n    if (startDate) params.push(`start_date=${startDate}`);\n    if (endDate) params.push(`end_date=${endDate}`);\n    \n    if (params.length > 0) {\n      url += '?' + params.join('&');\n    }\n    \n    return this.http.get(url, { withCredentials: true });\n  }\n\n  deleteBooking(bookingId: number): Observable<any> {\n    return this.http.delete(`${this.apiUrl}/bookings/${bookingId}`, {\n      headers: this.getHeaders(),\n      withCredentials: true\n    });\n  }\n\n  blockSlot(slotData: any): Observable<any> {\n    return this.http.post(`${this.apiUrl}/block-slot`, slotData, { \n      headers: this.getHeaders(),\n      withCredentials: true\n    });\n  }\n\n  unblockSlot(slotData: any): Observable<any> {\n    return this.http.post(`${this.apiUrl}/unblock-slot`, slotData, { \n      headers: this.getHeaders(),\n      withCredentials: true\n    });\n  }\n\n  getBlockedSlots(): Observable<any> {\n    return this.http.get(`${this.apiUrl}/blocked-slots`, { withCredentials: true });\n  }\n\n  getAllBookings(date?: string): Observable<any> {\n    let url = `${this.apiUrl}/bookings`;\n    if (date) {\n      url += `?date=${date}`;\n    }\n    return this.http.get(url, { withCredentials: true });\n  }\n\n  getNotifications(unreadOnly: boolean = false): Observable<any> {\n    let url = `${this.apiUrl}/notifications`;\n    if (unreadOnly) {\n      url += '?unread_only=true';\n    }\n    return this.http.get(url, { withCredentials: true });\n  }\n\n  markNotificationRead(notificationId: number): Observable<any> {\n    return this.http.post(`${this.apiUrl}/notifications/${notificationId}/mark-read`, {}, { \n      headers: this.getHeaders(),\n      withCredentials: true\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}