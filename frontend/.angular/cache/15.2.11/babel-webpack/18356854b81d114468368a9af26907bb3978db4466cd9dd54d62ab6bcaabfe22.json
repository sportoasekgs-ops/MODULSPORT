{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/api.service\";\nimport * as i2 from \"@angular/router\";\nfunction SlotsComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"div\", 8)(2, \"span\", 9);\n    i0.ɵɵtext(3, \"Laden...\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction SlotsComponent_div_8_div_1_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\")(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const slot_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(slot_r4.current_students);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" / \", slot_r4.max_students, \" Sch\\u00FCler (\", slot_r4.available_spots, \" Pl\\u00E4tze frei) \");\n  }\n}\nfunction SlotsComponent_div_8_div_1_span_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 21)(1, \"strong\");\n    i0.ɵɵtext(2, \"Blockiert:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const slot_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", slot_r4.blocked_reason, \" \");\n  }\n}\nfunction SlotsComponent_div_8_div_1_button_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function SlotsComponent_div_8_div_1_button_12_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const slot_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r13.bookSlot(slot_r4));\n    });\n    i0.ɵɵtext(1, \" Buchen \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SlotsComponent_div_8_div_1_span_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 23);\n    i0.ɵɵtext(1, \"Blockiert\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SlotsComponent_div_8_div_1_span_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 24);\n    i0.ɵɵtext(1, \"Voll\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SlotsComponent_div_8_div_1_div_15_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"small\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const booking_r17 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\"\", booking_r17.offer_label, \" - \", booking_r17.teacher_name, \" (\", booking_r17.student_count, \" Sch\\u00FCler)\");\n  }\n}\nfunction SlotsComponent_div_8_div_1_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"small\", 26);\n    i0.ɵɵtext(2, \"Aktuelle Buchungen:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\", 27);\n    i0.ɵɵtemplate(4, SlotsComponent_div_8_div_1_div_15_li_4_Template, 3, 3, \"li\", 28);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const slot_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", slot_r4.bookings);\n  }\n}\nfunction SlotsComponent_div_8_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"div\", 12)(2, \"div\", 13)(3, \"div\")(4, \"h5\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 14);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\", 15);\n    i0.ɵɵtemplate(9, SlotsComponent_div_8_div_1_span_9_Template, 4, 3, \"span\", 5);\n    i0.ɵɵtemplate(10, SlotsComponent_div_8_div_1_span_10_Template, 4, 1, \"span\", 16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\");\n    i0.ɵɵtemplate(12, SlotsComponent_div_8_div_1_button_12_Template, 2, 0, \"button\", 17);\n    i0.ɵɵtemplate(13, SlotsComponent_div_8_div_1_span_13_Template, 2, 0, \"span\", 18);\n    i0.ɵɵtemplate(14, SlotsComponent_div_8_div_1_span_14_Template, 2, 0, \"span\", 19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(15, SlotsComponent_div_8_div_1_div_15_Template, 5, 1, \"div\", 20);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const slot_r4 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", ctx_r3.getSlotClass(slot_r4));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate2(\"\", slot_r4.period, \". Stunde: \", slot_r4.label, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", slot_r4.start_time, \" - \", slot_r4.end_time, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !slot_r4.is_blocked);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", slot_r4.is_blocked);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", slot_r4.is_available && !slot_r4.is_blocked);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", slot_r4.is_blocked);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !slot_r4.is_available && !slot_r4.is_blocked);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", slot_r4.bookings && slot_r4.bookings.length > 0);\n  }\n}\nfunction SlotsComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, SlotsComponent_div_8_div_1_Template, 16, 11, \"div\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.slots);\n  }\n}\nfunction SlotsComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29);\n    i0.ɵɵtext(1, \" Keine Slots f\\u00FCr dieses Datum verf\\u00FCgbar. \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class SlotsComponent {\n  constructor(apiService, router) {\n    this.apiService = apiService;\n    this.router = router;\n    this.selectedDate = '';\n    this.slots = [];\n    this.loading = false;\n  }\n  ngOnInit() {\n    this.selectedDate = new Date().toISOString().split('T')[0];\n    this.loadSlots();\n  }\n  loadSlots() {\n    if (!this.selectedDate) return;\n    this.loading = true;\n    this.apiService.getSlots(this.selectedDate).subscribe({\n      next: response => {\n        this.slots = response.slots || [];\n        this.loading = false;\n      },\n      error: error => {\n        console.error('Error loading slots:', error);\n        this.loading = false;\n      }\n    });\n  }\n  bookSlot(slot) {\n    this.router.navigate(['/book', this.selectedDate, slot.period]);\n  }\n  getSlotClass(slot) {\n    if (slot.is_blocked) return 'slot-blocked';\n    if (slot.is_available) return 'slot-available';\n    return 'slot-full';\n  }\n  static {\n    this.ɵfac = function SlotsComponent_Factory(t) {\n      return new (t || SlotsComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: SlotsComponent,\n      selectors: [[\"app-slots\"]],\n      decls: 10,\n      vars: 4,\n      consts: [[1, \"card\"], [1, \"mb-3\"], [\"for\", \"dateSelect\", 1, \"form-label\"], [\"type\", \"date\", \"id\", \"dateSelect\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"class\", \"loading-container\", 4, \"ngIf\"], [4, \"ngIf\"], [\"class\", \"alert alert-info\", 4, \"ngIf\"], [1, \"loading-container\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-primary\"], [1, \"visually-hidden\"], [\"class\", \"card mb-2\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [1, \"card\", \"mb-2\", 3, \"ngClass\"], [1, \"card-body\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\"], [1, \"mb-1\"], [1, \"mb-0\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [\"class\", \"btn btn-primary\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"badge bg-danger\", 4, \"ngIf\"], [\"class\", \"badge bg-warning\", 4, \"ngIf\"], [\"class\", \"mt-2\", 4, \"ngIf\"], [1, \"text-danger\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"badge\", \"bg-danger\"], [1, \"badge\", \"bg-warning\"], [1, \"mt-2\"], [1, \"text-muted\"], [1, \"list-unstyled\", \"mb-0\"], [4, \"ngFor\", \"ngForOf\"], [1, \"alert\", \"alert-info\"]],\n      template: function SlotsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n          i0.ɵɵtext(2, \"Verf\\u00FCgbare Slots\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"div\", 1)(4, \"label\", 2);\n          i0.ɵɵtext(5, \"Datum w\\u00E4hlen:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"input\", 3);\n          i0.ɵɵlistener(\"ngModelChange\", function SlotsComponent_Template_input_ngModelChange_6_listener($event) {\n            return ctx.selectedDate = $event;\n          })(\"change\", function SlotsComponent_Template_input_change_6_listener() {\n            return ctx.loadSlots();\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(7, SlotsComponent_div_7_Template, 4, 0, \"div\", 4);\n          i0.ɵɵtemplate(8, SlotsComponent_div_8_Template, 2, 1, \"div\", 5);\n          i0.ɵɵtemplate(9, SlotsComponent_div_9_Template, 2, 0, \"div\", 6);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngModel\", ctx.selectedDate);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.slots.length > 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.slots.length === 0);\n        }\n      },\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["i0","SlotsComponent","constructor","apiService","router","ngOnInit","selectedDate","Date","toISOString","split","loadSlots","loading","getSlots","subscribe","next","response","slots","error","console","bookSlot","slot","navigate","period","getSlotClass","is_blocked","is_available","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/home/runner/workspace/frontend/src/app/components/slots/slots.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ApiService } from '../../services/api.service';\n\n@Component({\n  selector: 'app-slots',\n  template: `\n    <div class=\"card\">\n      <h2>Verfügbare Slots</h2>\n      \n      <div class=\"mb-3\">\n        <label for=\"dateSelect\" class=\"form-label\">Datum wählen:</label>\n        <input \n          type=\"date\" \n          class=\"form-control\" \n          id=\"dateSelect\" \n          [(ngModel)]=\"selectedDate\"\n          (change)=\"loadSlots()\">\n      </div>\n      \n      <div *ngIf=\"loading\" class=\"loading-container\">\n        <div class=\"spinner-border text-primary\" role=\"status\">\n          <span class=\"visually-hidden\">Laden...</span>\n        </div>\n      </div>\n      \n      <div *ngIf=\"!loading && slots.length > 0\">\n        <div *ngFor=\"let slot of slots\" \n             class=\"card mb-2\" \n             [ngClass]=\"getSlotClass(slot)\">\n          <div class=\"card-body\">\n            <div class=\"d-flex justify-content-between align-items-center\">\n              <div>\n                <h5>{{ slot.period }}. Stunde: {{ slot.label }}</h5>\n                <p class=\"mb-1\">{{ slot.start_time }} - {{ slot.end_time }}</p>\n                <p class=\"mb-0\">\n                  <span *ngIf=\"!slot.is_blocked\">\n                    <strong>{{ slot.current_students }}</strong> / {{ slot.max_students }} Schüler\n                    ({{ slot.available_spots }} Plätze frei)\n                  </span>\n                  <span *ngIf=\"slot.is_blocked\" class=\"text-danger\">\n                    <strong>Blockiert:</strong> {{ slot.blocked_reason }}\n                  </span>\n                </p>\n              </div>\n              <div>\n                <button \n                  *ngIf=\"slot.is_available && !slot.is_blocked\" \n                  class=\"btn btn-primary\"\n                  (click)=\"bookSlot(slot)\">\n                  Buchen\n                </button>\n                <span *ngIf=\"slot.is_blocked\" class=\"badge bg-danger\">Blockiert</span>\n                <span *ngIf=\"!slot.is_available && !slot.is_blocked\" class=\"badge bg-warning\">Voll</span>\n              </div>\n            </div>\n            \n            <div *ngIf=\"slot.bookings && slot.bookings.length > 0\" class=\"mt-2\">\n              <small class=\"text-muted\">Aktuelle Buchungen:</small>\n              <ul class=\"list-unstyled mb-0\">\n                <li *ngFor=\"let booking of slot.bookings\">\n                  <small>{{ booking.offer_label }} - {{ booking.teacher_name }} ({{ booking.student_count }} Schüler)</small>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <div *ngIf=\"!loading && slots.length === 0\" class=\"alert alert-info\">\n        Keine Slots für dieses Datum verfügbar.\n      </div>\n    </div>\n  `,\n  styles: []\n})\nexport class SlotsComponent implements OnInit {\n  selectedDate: string = '';\n  slots: any[] = [];\n  loading: boolean = false;\n\n  constructor(\n    private apiService: ApiService,\n    private router: Router\n  ) { }\n\n  ngOnInit(): void {\n    this.selectedDate = new Date().toISOString().split('T')[0];\n    this.loadSlots();\n  }\n\n  loadSlots(): void {\n    if (!this.selectedDate) return;\n    \n    this.loading = true;\n    this.apiService.getSlots(this.selectedDate).subscribe({\n      next: (response) => {\n        this.slots = response.slots || [];\n        this.loading = false;\n      },\n      error: (error) => {\n        console.error('Error loading slots:', error);\n        this.loading = false;\n      }\n    });\n  }\n\n  bookSlot(slot: any): void {\n    this.router.navigate(['/book', this.selectedDate, slot.period]);\n  }\n\n  getSlotClass(slot: any): string {\n    if (slot.is_blocked) return 'slot-blocked';\n    if (slot.is_available) return 'slot-available';\n    return 'slot-full';\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}