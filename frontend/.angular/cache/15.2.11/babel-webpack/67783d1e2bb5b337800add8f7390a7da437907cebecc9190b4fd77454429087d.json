{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/api.service\";\nfunction MyBookingsComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 7)(2, \"span\", 8);\n    i0.ɵɵtext(3, \"Laden...\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction MyBookingsComponent_div_4_tr_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\")(10, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function MyBookingsComponent_div_4_tr_15_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const booking_r6 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.deleteBooking(booking_r6.id));\n    });\n    i0.ɵɵtext(11, \" L\\u00F6schen \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const booking_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(booking_r6.date);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", booking_r6.period, \". Stunde\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(booking_r6.offer_label);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", booking_r6.student_count, \" Sch\\u00FCler\");\n  }\n}\nfunction MyBookingsComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"table\", 9)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"Datum\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Stunde\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Angebot\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Sch\\u00FCler\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"Aktionen\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"tbody\");\n    i0.ɵɵtemplate(15, MyBookingsComponent_div_4_tr_15_Template, 12, 4, \"tr\", 10);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(15);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.bookings);\n  }\n}\nfunction MyBookingsComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1, \" Sie haben noch keine Buchungen. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MyBookingsComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.successMessage, \" \");\n  }\n}\nfunction MyBookingsComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.errorMessage, \" \");\n  }\n}\nexport class MyBookingsComponent {\n  constructor(apiService) {\n    this.apiService = apiService;\n    this.bookings = [];\n    this.loading = false;\n    this.successMessage = '';\n    this.errorMessage = '';\n  }\n  ngOnInit() {\n    this.loadBookings();\n  }\n  loadBookings() {\n    this.loading = true;\n    this.apiService.getMyBookings().subscribe({\n      next: response => {\n        this.bookings = response.bookings || [];\n        this.loading = false;\n      },\n      error: error => {\n        console.error('Error loading bookings:', error);\n        this.loading = false;\n        this.errorMessage = 'Fehler beim Laden der Buchungen';\n      }\n    });\n  }\n  deleteBooking(bookingId) {\n    if (!confirm('Möchten Sie diese Buchung wirklich löschen?')) {\n      return;\n    }\n    this.apiService.deleteBooking(bookingId).subscribe({\n      next: response => {\n        this.successMessage = 'Buchung erfolgreich gelöscht';\n        this.loadBookings();\n        setTimeout(() => this.successMessage = '', 3000);\n      },\n      error: error => {\n        this.errorMessage = error.error?.error || 'Fehler beim Löschen der Buchung';\n        setTimeout(() => this.errorMessage = '', 3000);\n      }\n    });\n  }\n  static {\n    this.ɵfac = function MyBookingsComponent_Factory(t) {\n      return new (t || MyBookingsComponent)(i0.ɵɵdirectiveInject(i1.ApiService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: MyBookingsComponent,\n      selectors: [[\"app-my-bookings\"]],\n      decls: 8,\n      vars: 5,\n      consts: [[1, \"card\"], [\"class\", \"loading-container\", 4, \"ngIf\"], [4, \"ngIf\"], [\"class\", \"alert alert-info\", 4, \"ngIf\"], [\"class\", \"alert alert-success mt-3\", 4, \"ngIf\"], [\"class\", \"alert alert-danger mt-3\", 4, \"ngIf\"], [1, \"loading-container\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-primary\"], [1, \"visually-hidden\"], [1, \"table\", \"table-striped\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-sm\", \"btn-danger\", 3, \"click\"], [1, \"alert\", \"alert-info\"], [1, \"alert\", \"alert-success\", \"mt-3\"], [1, \"alert\", \"alert-danger\", \"mt-3\"]],\n      template: function MyBookingsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n          i0.ɵɵtext(2, \"Meine Buchungen\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(3, MyBookingsComponent_div_3_Template, 4, 0, \"div\", 1);\n          i0.ɵɵtemplate(4, MyBookingsComponent_div_4_Template, 16, 1, \"div\", 2);\n          i0.ɵɵtemplate(5, MyBookingsComponent_div_5_Template, 2, 0, \"div\", 3);\n          i0.ɵɵtemplate(6, MyBookingsComponent_div_6_Template, 2, 1, \"div\", 4);\n          i0.ɵɵtemplate(7, MyBookingsComponent_div_7_Template, 2, 1, \"div\", 5);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.bookings.length > 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.bookings.length === 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.successMessage);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n        }\n      },\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["i0","MyBookingsComponent","constructor","apiService","ngOnInit","loadBookings","loading","getMyBookings","subscribe","next","response","bookings","error","console","errorMessage","deleteBooking","bookingId","confirm","successMessage","setTimeout","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/home/runner/workspace/frontend/src/app/components/my-bookings/my-bookings.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ApiService } from '../../services/api.service';\n\n@Component({\n  selector: 'app-my-bookings',\n  template: `\n    <div class=\"card\">\n      <h2>Meine Buchungen</h2>\n      \n      <div *ngIf=\"loading\" class=\"loading-container\">\n        <div class=\"spinner-border text-primary\" role=\"status\">\n          <span class=\"visually-hidden\">Laden...</span>\n        </div>\n      </div>\n      \n      <div *ngIf=\"!loading && bookings.length > 0\">\n        <table class=\"table table-striped\">\n          <thead>\n            <tr>\n              <th>Datum</th>\n              <th>Stunde</th>\n              <th>Angebot</th>\n              <th>Schüler</th>\n              <th>Aktionen</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr *ngFor=\"let booking of bookings\">\n              <td>{{ booking.date }}</td>\n              <td>{{ booking.period }}. Stunde</td>\n              <td>{{ booking.offer_label }}</td>\n              <td>{{ booking.student_count }} Schüler</td>\n              <td>\n                <button class=\"btn btn-sm btn-danger\" (click)=\"deleteBooking(booking.id)\">\n                  Löschen\n                </button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      \n      <div *ngIf=\"!loading && bookings.length === 0\" class=\"alert alert-info\">\n        Sie haben noch keine Buchungen.\n      </div>\n      \n      <div *ngIf=\"successMessage\" class=\"alert alert-success mt-3\">\n        {{ successMessage }}\n      </div>\n      \n      <div *ngIf=\"errorMessage\" class=\"alert alert-danger mt-3\">\n        {{ errorMessage }}\n      </div>\n    </div>\n  `,\n  styles: []\n})\nexport class MyBookingsComponent implements OnInit {\n  bookings: any[] = [];\n  loading: boolean = false;\n  successMessage: string = '';\n  errorMessage: string = '';\n\n  constructor(private apiService: ApiService) { }\n\n  ngOnInit(): void {\n    this.loadBookings();\n  }\n\n  loadBookings(): void {\n    this.loading = true;\n    this.apiService.getMyBookings().subscribe({\n      next: (response) => {\n        this.bookings = response.bookings || [];\n        this.loading = false;\n      },\n      error: (error) => {\n        console.error('Error loading bookings:', error);\n        this.loading = false;\n        this.errorMessage = 'Fehler beim Laden der Buchungen';\n      }\n    });\n  }\n\n  deleteBooking(bookingId: number): void {\n    if (!confirm('Möchten Sie diese Buchung wirklich löschen?')) {\n      return;\n    }\n    \n    this.apiService.deleteBooking(bookingId).subscribe({\n      next: (response) => {\n        this.successMessage = 'Buchung erfolgreich gelöscht';\n        this.loadBookings();\n        setTimeout(() => this.successMessage = '', 3000);\n      },\n      error: (error) => {\n        this.errorMessage = error.error?.error || 'Fehler beim Löschen der Buchung';\n        setTimeout(() => this.errorMessage = '', 3000);\n      }\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}